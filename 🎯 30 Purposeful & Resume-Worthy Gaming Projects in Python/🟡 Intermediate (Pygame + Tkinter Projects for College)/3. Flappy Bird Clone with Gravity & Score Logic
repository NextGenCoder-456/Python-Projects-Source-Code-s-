import pygame, random

pygame.init()
WIDTH, HEIGHT = 400, 600
win = pygame.display.set_mode((WIDTH, HEIGHT))
clock = pygame.time.Clock()

bird = pygame.Rect(100, 300, 30, 30)
gravity = 0.5
velocity = 0
score = 0
font = pygame.font.SysFont(None, 40)

pipes = []
pipe_gap = 150
pipe_width = 60
pipe_timer = 0

def draw():
    win.fill((135, 206, 250))
    pygame.draw.rect(win, (255, 255, 0), bird)
    for pipe in pipes:
        pygame.draw.rect(win, (34, 139, 34), pipe)
    score_text = font.render(f"Score: {score}", True, (0, 0, 0))
    win.blit(score_text, (10, 10))
    pygame.display.update()

def main():
    global velocity, pipe_timer, score
    run = True
    while run:
        velocity += gravity
        bird.y += velocity

        for event in pygame.event.get():
            if event.type == pygame.QUIT: run = False
            if event.type == pygame.KEYDOWN:
                if event.key == pygame.K_SPACE:
                    velocity = -8

        if pipe_timer <= 0:
            height = random.randint(100, 400)
            pipes.append(pygame.Rect(WIDTH, 0, pipe_width, height))
            pipes.append(pygame.Rect(WIDTH, height + pipe_gap, pipe_width, HEIGHT))
            pipe_timer = 100
        pipe_timer -= 1

        for pipe in pipes[:]:
            pipe.x -= 4
            if pipe.right < 0:
                pipes.remove(pipe)
                score += 0.5

        for pipe in pipes:
            if bird.colliderect(pipe):
                run = False

        if bird.top < 0 or bird.bottom > HEIGHT:
            run = False

        draw()
        clock.tick(60)

    pygame.quit()

main()
